# 简化设计方案：单卡片Radio选择

## 🎯 设计理念

原来的双卡片互斥开关方案过于复杂，容易出现状态同步问题。新方案采用更直观的单卡片设计，通过Radio选择来切换不同的API配置。

## 📱 界面设计

### 新界面结构
```
┌─────────────────────────────────────────────────────────┐
│ AI大模型翻译API配置                                      │
│                                                         │
│ ○ 翻译API(一)    ● 翻译API(二)                          │
│                                                         │
│ API URL: [https://api.openai.com/v1/chat/completions]  │
│ API Key: [●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●] │
│ 模型名称: [gpt-4]                                      │
│                                                         │
│              [▶ 测试翻译API(二)]                        │
└─────────────────────────────────────────────────────────┘
```

## ✨ 设计优势

### 1. 简化交互
- **单一卡片**：只有一个配置卡片，界面更简洁
- **Radio选择**：用户通过Radio按钮选择使用哪个API
- **即时切换**：选择不同Radio时，下方配置立即切换

### 2. 消除复杂性
- **无开关冲突**：不再有互斥开关的同步问题
- **无状态混乱**：每次只显示一个API的配置
- **无动态排序**：固定的界面布局，用户不会困惑

### 3. 用户体验优化
- **直观明确**：用户一眼就能看出当前使用的API
- **操作简单**：点击Radio即可切换，无需复杂的开关操作
- **配置清晰**：当前选中的API配置完全展示，未选中的隐藏

## 🔧 技术实现

### 核心组件结构
```kotlin
DualTranslationApiSection_7ree
├── Radio选择区域
│   ├── 翻译API(一) RadioButton
│   └── 翻译API(二) RadioButton
└── 配置显示区域
    └── TranslationApiConfigSection_7ree (动态切换)
```

### 状态管理
```kotlin
// 根据配置确定当前选中的API
val selectedApi = if (apiConfig.translationApi1.isEnabled) 1 else 2

// Radio点击时的状态切换
RadioButton(
    selected = selectedApi == 1,
    onClick = {
        onApi1Change(..., true)   // 启用API1
        onApi2Change(..., false)  // 禁用API2
    }
)
```

### 配置显示逻辑
```kotlin
// 根据选择显示对应的配置
if (selectedApi == 1) {
    TranslationApiConfigSection_7ree(config = apiConfig.translationApi1, ...)
} else {
    TranslationApiConfigSection_7ree(config = apiConfig.translationApi2, ...)
}
```

## 📊 对比分析

| 特性 | 旧方案（双卡片开关） | 新方案（单卡片Radio） |
|------|---------------------|---------------------|
| **界面复杂度** | 高（两个卡片） | 低（一个卡片） |
| **交互方式** | 互斥开关 | Radio选择 |
| **状态同步** | 复杂，易出错 | 简单，可靠 |
| **用户理解** | 需要学习互斥逻辑 | 直观易懂 |
| **维护成本** | 高 | 低 |
| **Bug风险** | 高（状态冲突） | 低 |

## 🎊 实现效果

### 用户操作流程
1. **查看当前API**：通过Radio选择状态一眼看出当前使用的API
2. **切换API**：点击另一个Radio按钮
3. **配置更新**：界面立即显示新选择API的配置
4. **测试功能**：测试按钮自动显示对应的API编号

### 技术优势
- ✅ **无状态冲突**：Radio选择天然互斥，不会出现状态同步问题
- ✅ **代码简洁**：大幅减少状态管理代码
- ✅ **易于维护**：逻辑清晰，便于后续修改和扩展
- ✅ **用户友好**：符合用户对Radio选择的认知习惯

## 🔄 迁移说明

### 接口兼容性
- 外部调用接口保持不变
- `onApi1Change` 和 `onApi2Change` 回调函数签名不变
- 配置数据结构完全兼容

### 行为变化
- 用户通过Radio选择API，而不是开关
- 界面只显示当前选中API的配置
- 测试按钮自动显示对应的API编号

## 📝 总结

新的单卡片Radio选择方案成功解决了原方案的复杂性问题：
- **简化了用户界面**：从两个卡片简化为一个卡片
- **消除了状态冲突**：Radio选择天然互斥，无同步问题
- **提升了用户体验**：操作更直观，理解更容易
- **降低了维护成本**：代码更简洁，逻辑更清晰

这是一个更优雅、更可靠的解决方案！🚀