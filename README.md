# WordCard - AI 智能单词卡片应用

<div align="center">

![Android](https://img.shields.io/badge/Android-3DDC84?style=for-the-badge&logo=android&logoColor=white)
![Kotlin](https://img.shields.io/badge/Kotlin-0095D5?style=for-the-badge&logo=kotlin&logoColor=white)
![Jetpack Compose](https://img.shields.io/badge/Jetpack_Compose-4285F4?style=for-the-badge&logo=jetpack-compose&logoColor=white)
![OpenAI](https://img.shields.io/badge/OpenAI-412991?style=for-the-badge&logo=openai&logoColor=white)

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg?style=for-the-badge)](https://opensource.org/licenses/MIT)
[![Version](https://img.shields.io/badge/version-3.7-blue.svg?style=for-the-badge)](https://github.com/lukechern/wordcard)

</div>

## 📱 应用简介

WordCard单词卡片 是一款基于 AI 的智能单词学习安卓应用APP，集成了 OpenAI GPT 或兼容模型，为用户提供智能化的英语单词查询和学习体验。应用采用现代化的 Jetpack Compose UI 框架，提供流畅的用户界面和丰富的功能特性。

## 🆕 版本 3.7 更新内容

### ⌨️ 全新自定义键盘体验
- **更便利的操作**: 全新设计的自定义键盘，键位布局简洁明了，操作更加便捷高效
- **更美观的界面**: 现代化的键盘UI设计，视觉效果精美，与应用整体风格完美融合
- **更简单的键位**: 精简的键位设计，减少误触概率，更适合单词输入，让输入更加准确流畅
- **丰富的交互反馈**: 每次按键时提供视觉动画、触觉震动和音效反馈的完美组合，打造沉浸式输入体验
- **灵活的键盘选择**: 用户可自主选择使用简洁的应用内置键盘，或切换至手机系统默认键盘

### 🎨 界面布局优化
- **单词详情页重构**: 优化了单词详情页面的布局结构，将底部三个信息卡片固定在页面底部
- **滚动区域优化**: 滚动条作用范围仅限于正文内容部分，底部卡片保持固定不滚动
- **卡片高度精简**: 缩小了底部信息卡片的高度，为上方文本区域节省更多显示空间
- **间距精细调整**: 将卡片内部的上下间距等比缩小30%，同时保持图标尺寸不变
- **提示文字优化**: 调整"上下滑动切换单词"提示文字颜色为更灰色调，减少行高和边距

### 🔧 技术架构改进
- **音效播放策略**: 实现了多重音效播放检查机制，确保在合适的条件下播放音效
- **系统权限检测**: 添加了系统设置权限的检查和处理逻辑
- **性能优化**: 优化了界面渲染性能，减少了不必要的重绘和布局计算
- **代码清理**: 移除了测试阶段的调试日志输出，提升了代码的整洁性

### 🎯 用户体验提升
- 键盘操作时提供更自然的触觉和听觉反馈
- 单词详情页面的信息展示更加紧凑和高效
- 滚动体验更加流畅，避免了底部卡片的意外滚动
- 界面空间利用率显著提升，文本内容显示区域更大

## 🆕 版本 3.6 更新内容

### 🎯 导航体验全面升级
- **边缘滑动返回功能**: 在单词详情页面新增边缘滑动检测，从屏幕左边缘向右滑动即可返回单词本
- **智能返回键优化**: 优化了返回键逻辑，从单词本进入单词详情页时，按返回键直接返回单词本而非退出应用
- **滚动位置记忆**: 实现了单词本滚动位置的智能保存和恢复，从单词详情页返回时精确恢复到之前的浏览位置
- **状态保持优化**: 返回单词本时完美保持筛选状态（收藏过滤）和分页数据，无需重新加载

### 🔧 技术架构改进
- **新增EdgeSwipeNavigationComponent_7ree组件**: 专门处理边缘滑动手势检测，支持自定义滑动阈值
- **ScrollPosition_7ree数据类**: 新增滚动位置数据结构，精确保存列表的滚动状态
- **优化LazyListState管理**: 改进了列表状态的传递和恢复机制，避免不必要的数据重载
- **智能滚动恢复**: 实现了条件化的滚动位置恢复，只在从单词详情页返回时触发

### 🎨 用户体验提升
- 手势导航更加自然流畅，符合现代移动应用的交互习惯
- 消除了返回时的位置跳转问题，提供连贯的浏览体验
- 减少了用户重新定位内容的时间成本
- 保持了完整的应用状态，避免了数据丢失和重复加载

## 🆕 版本 3.5 更新内容

### 📊 数据统计功能全面升级
- **全新统计卡片设计**: 重新设计了9个数据统计卡片，采用现代化的扁平设计风格
- **智能数字动画**: 数字卡片加载时实现从0增长到目标数值的1秒动画效果，提升视觉体验
- **精美视觉效果**: 统一了卡片阴影效果，添加了精致的边框线条，整体视觉更加协调
- **优化颜色主题**: 采用三行不同颜色主题（蓝色、橙色、绿色），数据分类更加清晰
- **图表布局优化**: 调整了图表中图例的位置，避免文字重叠，提升可读性
- **代码架构优化**: 清理了废弃的统计卡片组件，代码结构更加清晰

### 🎨 用户界面提升
- 统计数据展示更加直观和美观
- 卡片高度和内边距经过精心调整，信息密度适中
- 底部标题区域采用彩色背景配白色文字，视觉对比度更佳
- 数字字体和标题字体经过优化，提升可读性

### 🔧 技术改进
- 移除了旧版本的StatCard组件，代码更加精简
- 优化了动画性能，确保流畅的用户体验
- 改进了图表渲染逻辑，提升了数据展示的准确性

## 🆕 版本 3.2 更新内容

### 🎯 单词拼写练习功能
- **新增拼写练习卡片**: 在单词详情页面添加了拼写练习功能，点击即可开始拼写训练
- **智能词义显示**: 拼写练习界面以深绿色大标题显示中文词义，当词义包含多个释义时（用逗号或分号分隔），智能显示前两个词义
- **优化UI设计**: 移除了冗余的小标题，简化界面层次，让用户专注于拼写练习
- **精细化输入框**: 调整了输入框下划线样式，使其更加精致美观
- **实时拼写检测**: 输入完成后自动检测拼写正确性，提供即时反馈
- **成功动画效果**: 拼写正确时显示绿色对勾动画，错误时显示红色叉号提示
- **智能聚焦**: 对话框打开时自动聚焦输入框，提升用户体验

### 🎨 用户体验提升
- 拼写练习功能与单词学习完美结合，形成完整的学习闭环
- 简洁明了的界面设计，让用户专注于拼写练习本身
- 智能的词义截取算法，避免界面信息过载
- 流畅的交互动画，提供愉悦的学习体验

## 🆕 版本 3.0 更新内容

### 📚 帮助系统优化
- **新增帮助页面**: 在配置页面添加了全新的"帮助"标签，位于第一个tab位置
- **详细使用指南**: 提供了从安装到使用的完整六步指南，文风风趣幽默
- **可视化步骤**: 每个使用步骤都配有相应图标，界面美观易读
- **贴心提示**: 添加了学习小贴士，鼓励用户坚持学习
- **独立模块设计**: 帮助功能采用独立文件实现，便于后续维护升级

### 🎯 用户体验提升
- 新用户可以快速了解应用的完整功能
- 降低了学习成本，提升了应用的易用性
- 提供了清晰的操作流程指导
- 增强了用户对应用功能的认知

## 🆕 版本 2.6 更新内容

### 🎨 UI/UX 优化
- **桌面小组件优化**: 打开桌面小组件时，自动聚焦输入框，弹出手机键盘，提升用户体验
- **桌面小组件优化**: 用户发起查询，立刻进入结果等待页面，并给与合理提示，避免误操作
- **桌面小组件优化**: 查询结果添加3个常用操作icon按钮，点击可快速执行关闭卡片、进入单词本，进入详情页的操作

### 🎬 图表动画优化
- **本周统计图表动画**: 为本周曲线图添加了1秒动画效果，数据点从0向Y轴移动到对应数值
- **年度统计图表动画**: 为年度柱状图添加了1秒动画效果，每个柱子从0向Y轴增长到对应数值
- **线条细化**: 将本周统计图表中的线条宽度减少15%，视觉效果更精细
- **柱状图优化**: 年度统计图表中每个月的两个柱子各占50%的x轴格子并紧密贴合
- **阴影效果调整**: 统一调整了所有卡片组件的阴影效果，提升界面一致性

### 🎨 视觉体验提升
- 图表加载时的流畅动画效果
- 更紧凑和专业的柱状图布局
- 统一的卡片阴影设计语言
- 优化的线条粗细，提升数据可读性

## 🆕 版本 2.0 更新内容

### 🎨 UI/UX 优化
- **桌面小组件优化**: 调整了小组件搜索条的图标间距，提升视觉效果
- **搜索弹窗重构**: 完全重新设计了搜索弹出卡片的用户界面
  - 自动聚焦输入框并弹出键盘
  - 动态按钮状态管理（输入少于3个字符时禁用查询按钮）
  - 限制输入框只允许英文字母输入
  - 添加了精美的放大镜SVG图标
  - 支持回车键快速搜索
  - 统一了弹窗、输入框和按钮的圆角样式（8dp）
  - 调整弹窗宽度与桌面小组件保持一致（280dp）
  - 移除了弹出卡片的黑色标题栏，界面更简洁

### 🔧 技术改进
- **图标内嵌技术**: 使用SpannableString和ImageSpan技术将SVG图标完美嵌入按钮文字中
- **精确位置控制**: 实现了图标的像素级位置微调（向下偏移2px）
- **输入过滤优化**: 改进了中文字符过滤逻辑，确保只能输入英文字母
- **键盘显示优化**: 修复了键盘自动弹出的时序问题

### 📱 用户体验提升
- 搜索流程更加流畅和直观
- 视觉一致性大幅提升
- 减少了用户操作步骤
- 提供了更好的视觉反馈

## ✨ 主要功能

### 🤖 AI 智能查询
- 集成 OpenAI GPT 及其兼容模型，提供智能单词解释
- 支持音标、词性、中文定义、英文例句等详细信息
- 智能例句生成，包含中文翻译
- 同义词和反义词推荐

### 🎵 语音朗读
- 支持单词和例句的 TTS 语音朗读
- 支持英文和中文语音
- 智能语音状态管理

### 📚 学习管理
- 单词历史记录管理
- 收藏功能，支持标记重要单词
- 学习进度统计和可视化图表
- 本周学习趋势分析
- 数据导入导出功能

### ✏️ 拼写练习
- 交互式单词拼写练习功能
- 智能中文词义提示（自动显示前两个词义）
- 实时拼写正确性检测
- 成功/失败动画反馈
- 自动聚焦输入框，提升练习体验
- 精美的UI设计，专注学习效果

### 🎨 现代化界面
- 基于 Jetpack Compose 的现代化 UI
- Material Design 3 设计语言
- 流畅的动画效果
- 支持深色/浅色主题

### 📱 交互体验
- 手势导航，支持上下滑动切换单词
- 智能触摸区域划分，避免误触
- 响应式布局设计

### ⌨️ 全新自定义键盘
- 便捷高效的键位布局设计，操作更加流畅自然
- 现代化的键盘界面，视觉效果精美协调
- 精简的键位配置，有效减少误触和输入错误
- 三重感官反馈：视觉动画 + 触觉震动 + 音效提示
- 沉浸式的交互体验，每次按键都有丰富的反馈效果
- 灵活的键盘切换，支持应用内置键盘和系统键盘自由选择

## 🛠️ 技术栈

### 前端技术
- **UI 框架**: Jetpack Compose
- **设计语言**: Material Design 3
- **编程语言**: Kotlin
- **最低 SDK**: Android 8.0 (API 26)
- **目标 SDK**: Android 14 (API 36)
- **编译 SDK**: Android 14 (API 36)
- **图表实现**: Compose Canvas 自定义绘制

### 后端技术
- **AI 服务**: OpenAI GPT API
- **网络请求**: Ktor Client 2.3.4
- **数据序列化**: Kotlinx Serialization 1.6.0
- **Markdown 渲染**: Markwon 4.6.2

### 数据存储
- **本地数据库**: Room Database 2.6.1
- **数据访问**: Repository Pattern
- **数据导出**: JSON 格式

### 架构模式
- **架构模式**: MVVM (Model-View-ViewModel)
- **依赖注入**: 手动依赖注入
- **状态管理**: StateFlow + Compose State

## 📦 安装说明

### 环境要求
- Android Studio Hedgehog | 2023.1.1 或更高版本
- JDK 11 或更高版本
- Android SDK 26 或更高版本 (Android 8.0+)
- 支持设备: Android 8.0 及以上版本

### 构建步骤

1. **克隆项目**
   ```bash
   git clone https://github.com/lukechern/wordcard.git
   cd wordcard
   ```

2. **配置 API 密钥**
   - 在 `app/src/main/java/com/x7ree/wordcard/config/AppConfig_7ree.kt` 中配置您的 OpenAI API 密钥
   - 或者通过应用内设置界面配置

3. **构建项目**
   ```bash
   ./gradlew build
   ```

4. **安装到设备**
   ```bash
   ./gradlew installDebug
   ```

## 🔧 配置说明

### OpenAI API 配置
应用需要配置 OpenAI API 密钥才能使用 AI 查询功能：

1. 访问 [OpenAI API](https://platform.openai.com/api-keys) 获取 API 密钥
2. 在应用设置中配置 API 密钥
3. 可选择配置自定义 API 端点
4. 如果是其他 api提供商，只要兼容openai api接口，也可支持

### 提示词配置
支持自定义查询提示词和输出模板，以获得更符合个人需求的查询结果。

## 📁 项目结构

```
app/src/main/java/com/x7ree/wordcard/
├── api/                    # API 服务层
│   └── OpenAiApiService_7ree.kt
├── config/                 # 配置管理
│   ├── AppConfig_7ree.kt
│   └── PromptConfig_7ree.kt
├── data/                   # 数据层
│   ├── WordEntity_7ree.kt
│   ├── WordDao_7ree.kt
│   ├── WordDatabase_7ree.kt
│   ├── WordRepository_7ree.kt
│   └── DataExportImportManager_7ree.kt
├── query/                  # 查询逻辑
│   └── WordQueryViewModel_7ree.kt
├── ui/                     # 用户界面
│   ├── MainActivity.kt
│   ├── MainScreen_7ree.kt
│   ├── WordCardScreen_7ree.kt
│   ├── SplashScreen_7ree.kt
│   ├── DashboardContent_7ree.kt
│   ├── NewStatCard_7ree.kt
│   ├── DailyChartComponent_7ree.kt
│   ├── MonthlyChartComponent_7ree.kt
│   ├── BottomNavigationBar_7ree.kt
│   ├── SwipeNavigationComponent_7ree.kt
│   ├── SwipeableRevealItem_7ree.kt
│   └── theme/              # 主题相关
│       ├── Color.kt
│       ├── Theme.kt
│       └── Type.kt
```

## 🚀 使用指南

### 📖 快速入门（六步上手指南）

#### 第一步：安装配置，一步到位！⚙️
首先安装 APK 文件（这个你肯定已经搞定了，不然怎么看到这个页面呢？😄）。然后点击底部导航栏的【仪表盘】，再点击右上角的齿轮图标，进入配置页面。在这里配置你的大模型 API 参数——只要是兼容 OpenAI 格式的都可以哦！其他配置项保持默认就行，我们已经帮你调好了最佳参数。

#### 第二步：添加桌面小组件，随时随地查单词📱
在手机桌面长按空白处，选择【小组件】，找到 WordCard 并添加到桌面。以后想查单词时，直接点击小组件就能弹出查询卡片，超级方便！再也不用打开 APP 了～

#### 第三步：开始学习之旅！⭐
遇到生词？直接在小组件里输入就行！我们的 AI 大模型会瞬间为你解释单词含义，还会贴心地提供例句帮助理解。更棒的是，还有真人发音朗读功能，让你的发音也能更标准！

#### 第四步：单词本，你的专属词汇宝库📚
所有查过的单词都会自动保存到单词本里，再也不怕忘记了！在单词本里可以随时复习，点击单词右边的小喇叭🔊就能听发音，点击单词本身还能进入详情页查看更多信息。

#### 第五步：单词详情页，深度学习好帮手✅
在单词详情页里，你可以让 APP 朗读单词，收藏重要词汇，还能通过上下滑动手指来切换其他单词进行复习。更棒的是，现在还新增了拼写练习功能！点击拼写练习卡片，就能开始单词拼写训练，界面会以深绿色大标题显示中文词义（如果词义较多会智能显示前两个），让你在理解词义的基础上练习拼写。这样的学习体验，是不是很棒？

#### 第六步：仪表盘，见证你的成长📊
想看看自己的学习成果？进入仪表盘就能查看详细的学习数据和统计图表。看着那些不断增长的数字，成就感满满！📈

### 💡 小贴士
记住，学习语言最重要的是坚持！每天查几个生词，积少成多，你的词汇量会在不知不觉中突飞猛进。WordCard 会一直陪伴你的学习之路，加油！💪

### 🔧 基本操作
1. 启动应用后，在搜索框中输入要查询的英文单词
2. 点击"开始查"按钮，等待 AI 生成查询结果
3. 查看单词的详细信息，包括音标、定义、例句等
4. 点击喇叭图标收听单词或例句的发音
5. 点击收藏图标保存重要单词

### 🚀 高级功能
- **历史记录**: 在历史标签页查看所有查询过的单词
- **学习统计**: 在仪表盘查看学习进度和趋势图表
- **本周分析**: 可视化展示本周的单词收集和查阅统计
- **数据导出**: 在设置页面导出学习数据为 JSON 文件
- **数据导入**: 支持导入之前导出的学习数据
- **手势导航**: 在单词详情页面上下滑动切换单词

### 开发规范
- 遵循 Kotlin 编码规范
- 使用有意义的变量和函数命名
- 添加适当的注释和文档
- 确保代码通过所有测试

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

- [OpenAI](https://openai.com/) - 提供强大的 AI 模型
- [Jetpack Compose](https://developer.android.com/jetpack/compose) - 现代化的 UI 框架
- [Material Design](https://material.io/) - 设计语言指导
- [Ktor](https://ktor.io/) - 网络请求库
- [Room](https://developer.android.com/training/data-storage/room) - 本地数据库
- [Markwon](https://noties.io/Markwon/) - Markdown 渲染库

## 📞 联系方式

- 项目主页: [https://github.com/lukechern/wordcard](https://github.com/lukechern/wordcard)
- 问题反馈: [Issues](https://github.com/lukechern/wordcard/issues)


---

<div align="center">

**如果这个项目对您有帮助，请给它一个 ⭐️**

</div>